Подзапрос (subquery) — это запрос внутри другого SQL-запроса. Подзапросы позволяют строить сложные запросы, используя результаты одного запроса в качестве условий или значений для другого. Они могут быть использованы в различных частях основного запроса, включая предложения `SELECT`, `FROM`, `WHERE`, и `HAVING`.

### Особенности подзапросов:

1. **Вложенность**: Подзапросы могут быть вложенными, то есть один подзапрос может содержать в себе другой подзапрос.
2. **Независимость**: Каждый подзапрос должен быть независимым и полностью выполнимым, имея свой `SELECT` и, при необходимости, `FROM`.
3. **Возвращаемые данные**: Подзапрос может возвращать одно значение, несколько значений или даже целую таблицу в зависимости от контекста его использования.
4. **Корреляция**: Подзапросы могут быть коррелированными, когда они ссылаются на столбцы внешнего (родительского) запроса. Коррелированный подзапрос выполняется повторно для каждой строки внешнего запроса.

### Примеры использования подзапросов

```sql
-- Пример 1: Подзапрос для выбора всех сотрудников из определенного отдела
SELECT *
FROM employees
WHERE department_id = (SELECT id FROM departments WHERE name = 'Отдел разработки');

-- Пример 2: Подзапрос для подсчета количества сотрудников в каждом отделе
SELECT d.name, (SELECT COUNT(*) FROM employees WHERE department_id = d.id) AS num_employees
FROM departments d;

-- Пример 3: Подзапрос для выбора сотрудников с максимальной зарплатой
SELECT *
FROM employees
WHERE salary = (SELECT MAX(salary) FROM employees);

-- Пример 4: Подзапрос для выбора всех сотрудников, старше 30 лет
SELECT *
FROM employees
WHERE id IN (SELECT employee_id FROM employee_details WHERE age > 30);

